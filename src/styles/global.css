@import "tailwindcss";
@plugin "@tailwindcss/typography";

@theme {
	--color-background: var(--color-background);
	--color-surface: var(--color-surface);
	--color-surface-variant: var(--color-surface-variant);
	--color-primary: var(--color-primary);
	--color-secondary: var(--color-secondary);
	--color-accent: var(--color-accent);
	--color-accent-variant: var(--color-accent-variant);

	--text-color-on-background: var(--color-on-background);
	--text-color-on-surface: var(--color-on-surface);
	--text-color-on-surface-variant: var(--color-on-surface-variant);
	--text-color-on-primary: var(--color-on-primary);
	--text-color-on-secondary: var(--color-on-secondary);
	--text-color-on-accent: var(--color-on-accent);
	--text-color-on-accent-variant: var(--color-on-accent-variant);

	--border-color-primary: var(--color-primary);
	--border-color-secondary: var(--color-secondary);

	--shadow-outer-md: 0 0 10px -3px rgba(0, 0, 0, 0.3);
	--shadow-outer-lg: 0 0 20px -6px rgba(0, 0, 0, 0.4);

	--backdrop-blur-sm: 6px;
}

@variant dark (&:where([data-theme="light"], [data-theme="light"] *));
@variant dark (&:where([data-theme="dark"], [data-theme="dark"] *));

@layer base {
	/* Light Theme Colors */
	html[data-theme="light"] {
		--color-background: oklch(99% 0.003 60);
		--color-surface: oklch(96% 0.006 50);
		--color-surface-variant: oklch(92% 0.01 45);
		--color-primary: oklch(78% 0.13 45);
		--color-secondary: oklch(75% 0.11 200);
		--color-accent: oklch(72% 0.16 265);
		--color-accent-variant: oklch(81% 0.09 320);

		--color-on-background: oklch(18% 0.02 45);
		--color-on-surface: oklch(22% 0.02 45);
		--color-on-surface-variant: oklch(32% 0.03 45);
		--color-on-primary: oklch(98% 0.005 45);
		--color-on-secondary: oklch(98% 0.005 200);
		--color-on-accent: oklch(98% 0.005 265);
		--color-on-accent-variant: oklch(22% 0.02 45);
	}

	/* Dark Theme Colors */
	html[data-theme="dark"] {
		--color-background: oklch(15% 0.015 260);
		--color-surface: oklch(22% 0.02 260);
		--color-surface-variant: oklch(28% 0.025 260);
		--color-primary: oklch(75% 0.2 45);
		--color-secondary: oklch(70% 0.16 200);
		--color-accent: oklch(65% 0.24 265);
		--color-accent-variant: oklch(80% 0.14 320);

		--color-on-background: oklch(92% 0.01 260);
		--color-on-surface: oklch(94% 0.008 260);
		--color-on-surface-variant: oklch(85% 0.015 260);
		--color-on-primary: oklch(15% 0.02 260);
		--color-on-secondary: oklch(15% 0.02 260);
		--color-on-accent: oklch(15% 0.02 260);
		--color-on-accent-variant: oklch(15% 0.02 260);
	}
}

@layer components {
	/* Custom utilities for special elements that can't be handled by prose modifiers */
	.prose .callout {
		padding: 1.5rem;
		border-radius: 0.75rem;
		margin: 1.75rem 0;
		border-left: 4px solid var(--color-primary);
		background-color: var(--color-surface);
		box-shadow: var(--shadow-outer-md);
	}

	.prose .callout-info {
		border-left-color: var(--color-primary);
		background: color-mix(in srgb, var(--color-primary) 5%, transparent);
	}

	.prose .callout-warning {
		border-left-color: var(--color-accent-variant);
		background: color-mix(in srgb, var(--color-accent-variant) 5%, transparent);
	}

	.prose .callout-error {
		border-left-color: var(--color-secondary);
		background: color-mix(in srgb, var(--color-secondary) 5%, transparent);
	}

	.prose .highlight {
		background: color-mix(in srgb, var(--color-accent) 20%, transparent);
		padding: 0.125rem 0.25rem;
		border-radius: 0.25rem;
		color: var(--color-on-surface);
	}

	/* Custom list markers using arbitrary selectors */
	.prose ul > li {
		position: relative;
		padding-left: 0.375rem;
		list-style: none;
	}

	.prose ul > li::before {
		content: "";
		position: absolute;
		background-color: var(--color-accent);
		border-radius: 50%;
		width: 0.375rem;
		height: 0.375rem;
		top: 0.6875rem;
		left: -0.625rem;
	}

	.prose ol > li {
		position: relative;
		padding-left: 0.375rem;
		list-style: none;
	}

	.prose ol > li::before {
		content: counter(list-item, decimal) ".";
		position: absolute;
		font-weight: 600;
		color: var(--color-primary);
		left: -1.5rem;
	}

	/* Blockquote decorative quote */
	.prose blockquote::before {
		content: '"';
		position: absolute;
		top: -0.5rem;
		left: 1rem;
		font-size: 3rem;
		color: var(--color-accent);
		opacity: 0.3;
		font-family: Georgia, serif;
	}
}
